# ===========================================
# LINEA ENVIRONMENT CONFIGURATION
# ===========================================
# Copy this file to .env and update values for your environment
# Never commit .env files to version control

# ===========================================
# ENVIRONMENT
# ===========================================
NODE_ENV="development"  # development | staging | production
APP_NAME="Linea"
APP_VERSION="0.2.0"

# ===========================================
# DATABASE
# ===========================================
# PostgreSQL connection string
DATABASE_URL="postgresql://username:password@localhost:5432/linea_dev"

# Database connection pool settings
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_POOL_IDLE_TIMEOUT=30000

# ===========================================
# REDIS
# ===========================================
# Redis connection string for sessions and caching
REDIS_URL="redis://localhost:6379"

# Redis configuration
REDIS_PASSWORD=""
REDIS_DB=0
REDIS_KEY_PREFIX="linea:"

# ===========================================
# SERVER CONFIGURATION
# ===========================================
# API server settings
API_URL="http://localhost:9030"
FRONTEND_URL="http://localhost:3030"
PORT=9030
HOST="0.0.0.0"

# CORS settings
CORS_ORIGIN="http://localhost:3030"
CORS_CREDENTIALS=true

# ===========================================
# SECURITY
# ===========================================
# JWT configuration
JWT_SECRET="your-super-secret-jwt-key-change-this-in-production"
JWT_EXPIRES_IN="7d"
JWT_REFRESH_EXPIRES_IN="30d"

# Session configuration
SESSION_SECRET="your-super-secret-session-key-change-this-in-production"
SESSION_COOKIE_NAME="linea_session"
SESSION_COOKIE_MAX_AGE=604800000  # 7 days in milliseconds
SESSION_COOKIE_SECURE=false  # Set to true in production
SESSION_COOKIE_HTTP_ONLY=true
SESSION_COOKIE_SAME_SITE="lax"

# Rate limiting
RATE_LIMIT_WINDOW_MS=900000  # 15 minutes
RATE_LIMIT_MAX_REQUESTS=100

# ===========================================
# EMAIL CONFIGURATION (SENDGRID)
# ===========================================
SENDGRID_API_KEY="your-sendgrid-api-key"
SENDGRID_FROM_EMAIL="noreply@linea.app"
SENDGRID_FROM_NAME="Linea"
SENDGRID_REPLY_TO="support@linea.app"

# Email templates
SENDGRID_MAGIC_LINK_TEMPLATE_ID="d-magic-link-template"
SENDGRID_WAITLIST_CONFIRMATION_TEMPLATE_ID="d-waitlist-confirmation"
SENDGRID_OWNER_INVITE_TEMPLATE_ID="d-owner-invite"

# Force showing magic links in API responses (use only in dev/staging)
SHOW_MAGIC_LINK="true"

# ===========================================
# ANALYTICS & OBSERVABILITY
# ===========================================
# Google Analytics 4
VITE_GA_MEASUREMENT_ID="G-10W9B0RT17"

# Privacy-friendly analytics (Plausible/Matomo)
ANALYTICS_ENABLED=true
ANALYTICS_ID="your-analytics-id"
ANALYTICS_DOMAIN="linea.app"
ANALYTICS_SCRIPT_URL="https://plausible.io/js/script.js"

# Error tracking (Sentry)
SENTRY_DSN="your-sentry-dsn"
SENTRY_ENVIRONMENT="development"
SENTRY_RELEASE="0.2.0"

# Logging
LOG_LEVEL="info"  # error | warn | info | debug
LOG_FORMAT="json"  # json | pretty
LOG_FILE="logs/app.log"

# ===========================================
# MAPS & LOCATION (NICE TO HAVE)
# ===========================================
# OpenStreetMap/Nominatim configuration
NOMINATIM_BASE_URL="https://nominatim.openstreetmap.org"
NOMINATIM_USER_AGENT="Linea/0.2.0"
NOMINATIM_RATE_LIMIT=1000  # requests per hour

# Map tiles
MAP_TILE_URL="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"
MAP_ATTRIBUTION="Â© OpenStreetMap contributors"

# ===========================================
# FILE STORAGE
# ===========================================
# File upload settings
UPLOAD_MAX_SIZE=5242880  # 5MB in bytes
UPLOAD_ALLOWED_TYPES="image/jpeg,image/png,image/webp"
UPLOAD_PATH="./uploads"

# Storage provider (local | s3 | railway)
STORAGE_PROVIDER="local"
AWS_ACCESS_KEY_ID=""
AWS_SECRET_ACCESS_KEY=""
AWS_REGION="eu-west-1"
AWS_BUCKET="linea-uploads"

# ===========================================
# GDPR & PRIVACY
# ===========================================
# Data retention policies (in days)
DATA_RETENTION_SESSIONS=30
DATA_RETENTION_EMAILS=365
DATA_RETENTION_AUDIT_LOGS=2555  # 7 years

# Privacy settings
REQUIRE_DOUBLE_OPT_IN=true
COOKIE_CONSENT_REQUIRED=true
ANALYTICS_CONSENT_REQUIRED=true

# ===========================================
# FEATURE FLAGS
# ===========================================
FEATURE_NEARBY_SUGGESTIONS=false
FEATURE_MAP_INTEGRATION=false
FEATURE_PAYMENTS=false
FEATURE_ADVANCED_ANALYTICS=false

# ===========================================
# RAILWAY CONFIGURATION (PRODUCTION)
# ===========================================
RAILWAY_STATIC_URL="https://linea-production.up.railway.app"
RAILWAY_GIT_COMMIT_SHA=""
RAILWAY_SERVICE_NAME="linea-api"

# ===========================================
# DEVELOPMENT TOOLS
# ===========================================
# Database seeding
SEED_ADMIN_EMAIL="admin@linea.app"
SEED_ADMIN_PASSWORD="admin123"
SEED_SAMPLE_EVENTS=true

# Debug settings
DEBUG_SQL=false
DEBUG_REDIS=false
DEBUG_EMAIL=false
